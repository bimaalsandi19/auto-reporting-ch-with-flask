{% extends "layout.html" %} {% block title %}Home - Automasi Compaint Handling
{% endblock title %} {% block content %}

<div class="container-fluid">
  <h2 class="text-center">Auto Reporting Complaint Handling</h2>
  <br />
  <!-- Filter -->
  <div class="card p-2 mb-4 shadow-sm filter">
    <div class="row mb-2">
      <div class="col-md-2">
        <input
          type="text"
          name="from_date"
          id="from_date"
          class="form-control"
          placeholder="From Date"
        />
      </div>
      <div class="col-md-2">
        <input
          type="text"
          name="to_date"
          id="to_date"
          class="form-control"
          placeholder="To Date"
        />
      </div>
      <div class="col-md-2">
        <select
          class="form-select"
          aria-label="Default select example"
          name="Area_2"
          id="area"
        >
          <option selected disabled>Pilih Area</option>
          {% for d in getArea %}
          <option value="{{d.Area_2}}">{{d.Area_2}}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-2">
        <select
          class="form-select"
          aria-label="Default select example"
          name="Region"
          id="region"
        >
          <option selected disabled>Pilih Region</option>
          {% for d in getRegion %}

          <option value="{{d.Region}}">{{d.Region}}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-4">
        <div class="mb-3" role="group" aria-label="Basic example">
          <button
            type="button"
            value="Filter"
            name="filter"
            id="filter"
            class="btn btn-outline-primary"
          >
            <i class="bi bi-filter"></i>&nbsp; Filter
          </button>
          <!-- Example single danger button -->
          <div class="btn-group">
            <button
              type="button"
              class="btn btn-outline-danger dropdown-toggle"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Action
            </button>
            <ul class="dropdown-menu">
              <li>
                <a class="dropdown-item" href="index.php?page=upload"
                  ><i class="bi bi-upload"></i>&nbsp; Upload Data
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="index.php?page=edit"
                  ><i class="bi bi-pencil-square"></i>&nbsp; Edit Data</a
                >
              </li>
            </ul>
          </div>
          <div class="btn-group">
            <button
              type="button"
              class="btn btn-outline-success dropdown-toggle"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Export
            </button>
            <ul class="dropdown-menu">
              <li>
                <a class="dropdown-item" href="#" onclick="result()"
                  ><i class="bi bi-filetype-pdf"></i>&nbsp; Export To PDF
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="export_excel.php"
                  ><i class="bi bi-file-earmark-excel"></i>&nbsp; Export To
                  Excel
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- <section>
    <div class="row">
      <div class="col-md-6">
        <canvas id="myChart" width="400" height="200"></canvas>
      </div>
    </div>
    <script>
      const ctx = document.getElementById("myChart").getContext("2d");
      const myChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
          datasets: [
            {
              label: "# of Votes",
              data: [12, 19, 3, 5, 2, 3],
              backgroundColor: [
                "rgba(255, 99, 132, 0.2)",
                "rgba(54, 162, 235, 0.2)",
                "rgba(255, 206, 86, 0.2)",
                "rgba(75, 192, 192, 0.2)",
                "rgba(153, 102, 255, 0.2)",
                "rgba(255, 159, 64, 0.2)",
              ],
              borderColor: [
                "rgba(255, 99, 132, 1)",
                "rgba(54, 162, 235, 1)",
                "rgba(255, 206, 86, 1)",
                "rgba(75, 192, 192, 1)",
                "rgba(153, 102, 255, 1)",
                "rgba(255, 159, 64, 1)",
              ],
              borderWidth: 1,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
        plugins: [ChartDataLabels],
        options: {
          // ...
        },
      });
    </script>
  </section> -->

  <section class="trend-ticket">
    <div class="row mb-3">
      <div class="col-md-6">
        <div class="card p-1 shadow">
          <div class="collapse" id="trendTicketAndSLA">
            <div class="bg-dark p-4">
              <nav class="navbar">
                <ul>
                  <li>
                    <a href="#" onclick="trendTicketAndSLA()">Export To PDF</a>
                  </li>
                  <li><a href="#">Export To JPG</a></li>
                </ul>
              </nav>
            </div>
          </div>
          <nav class="navbar navbar-light bg-transparent">
            <div class="container-fluid">
              <button
                class="navbar-toggler border-0"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#trendTicketAndSLA"
                aria-controls="trendTicketAndSLA"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
          </nav>
          <canvas id="myChart01" width="100%"></canvas>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card p-1 shadow">
          <div class="collapse" id="trendTicketAndSLARegion">
            <div class="bg-dark p-4">
              <nav class="navbar">
                <ul>
                  <li>
                    <a href="#" onclick="trendTicketAndSLARegion()"
                      >Export To PDF</a
                    >
                  </li>
                  <li><a href="#">Export To JPG</a></li>
                </ul>
              </nav>
            </div>
          </div>
          <nav class="navbar navbar-light bg-transparent">
            <div class="container-fluid">
              <button
                class="navbar-toggler border-0"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#trendTicketAndSLARegion"
                aria-controls="trendTicketAndSLARegion"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
          </nav>
          <canvas id="myChart02" width="100%"></canvas>
        </div>
      </div>
    </div>
  </section>

  <section class="diagnose">
    <div class="row mb-4">
      <div class="col-md-4">
        <div class="card p-1 shadow">
          <img
            src="{{url_for('static',filename='img/boxjudul.png')}}"
            width="100%"
          />
          <h4 class="text-center text-white" style="margin-top: -45px">
            Diagnose Complaint
          </h4>
          <br />
          <div class="box text-center p-2 bg-danger mb-2">
            <p class="text-white mb-0">Total Interaction</p>
            <h4 class="text-white">
              {% for d in sqld %} {{d.total_interaction}} {% endfor %}
            </h4>
          </div>
          <div class="box text-center p-2 bg-danger">
            <p class="text-white mb-0">Total Network</p>
            <h4 class="text-white">
              {% for d in sqlt %} {{d.total}} {% endfor %}
            </h4>
          </div>
          <canvas id="chartWhy1" class="mt-3" height="345px"></canvas>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-1 shadow">
          <img
            src="{{url_for('static', filename='img/boxjudul.png')}}"
            width="100%"
          />
          <h4 class="text-center text-white" style="margin-top: -43px">
            Analyze & FTR
          </h4>
          <br />
          <div class="row">
            <div class="col-md-6">
              <div class="box text-center p-2 bg-danger" style="height: 100%">
                <p class="text-white mb-0">Total Network</p>
                <h4 class="text-white">
                  {% for d in sqlt %} {{d.total}} {% endfor %}
                </h4>
              </div>
            </div>
            <div class="col-md-6">
              <div class="box bg-white border border-dark p-2 mb-2">
                <p class="mb-0">Resolved By CEM</p>
                <h4>{% for d in sqlftr %} {{d.total_cem}} {% endfor %}</h4>
              </div>
              <div class="box bg-white border border-dark p-2">
                <p class="mb-0">Ticket Cancelled</p>
                <h4>
                  {% for d in sqlftr %} {{d.total_cancelled}} {% endfor %}
                </h4>
              </div>
            </div>
          </div>

          <canvas id="chartWhy2" height="345px" class="mt-2"></canvas>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-1 shadow">
          <img
            src="{{url_for('static', filename='img/boxjudul.png')}}"
            width="100%"
          />
          <h4 class="text-center text-white" style="margin-top: -43px">
            Ticket Resolve
          </h4>
          <br />
          <div class="row">
            <div class="col-md-6">
              <div class="box text-center p-2 bg-danger mb-2">
                <p class="text-white mb-0">Excalated</p>
                <h4 class="text-white">
                  {% for d in sqlftr %} {% for i in sqlt %} {{i.total -
                  d.total_cem - d.total_cancelled}} {% endfor %} {% endfor %}
                </h4>
              </div>
              <div class="box text-center p-2 bg-danger mb-2">
                <p class="text-white mb-0">Resolved</p>
                <h4 class="text-white">
                  {% for d in sqlftr %} {% for i in sqlt %} {{i.total -
                  d.total_cem - d.total_cancelled - d.total_inprog}} {% endfor
                  %} {% endfor %}
                </h4>
              </div>
              <div class="box text-center p-2 bg-danger mb-2">
                <p class="text-white mb-0">In Progress</p>
                <h4 class="text-white">
                  {% for d in sqlftr %} {{d.total_inprog}} {% endfor %}
                </h4>
              </div>
            </div>
            <div class="col-md-6">
              <div class="box text-center p-2 bg-white border border-dark mb-2">
                <p class="text-dark mb-0">Related Coverage</p>
                <h4 class="text-dark">
                  {% for d in sqlftr %} {{d.total_coverage}} {% endfor %}
                </h4>
              </div>
              <div class="box text-center p-2 bg-white border border-dark mb-2">
                <p class="text-dark mb-0">Related Availability</p>
                <h4 class="text-dark">
                  {% for d in sqlftr %} {{d.total_avail}} {% endfor %}
                </h4>
              </div>
              <div class="box text-center p-2 bg-white border border-dark mb-2">
                <p class="text-dark mb-0">Related Quality</p>
                <h4 class="text-dark">
                  {% for d in sqlftr %} {{d.total_quality}} {% endfor %}
                </h4>
              </div>
              <div class="box text-center p-2 bg-white border border-dark mb-2">
                <p class="text-dark mb-0">Non-Network Resolution</p>
                <h4 class="text-dark">
                  {% for d in sqlftr %} {{d.total_nonr}} {% endfor %}
                </h4>
              </div>
              <div class="box text-center p-2 bg-white border border-dark mb-2">
                <p class="text-dark mb-0">Related Capacity</p>
                <h4 class="text-dark">
                  {% for d in sqlftr %} {{d.total_capacity}} {% endfor %}
                </h4>
              </div>
              <div class="box text-center p-2 bg-white border border-dark mb-2">
                <p class="text-dark mb-0">Related Others</p>
                <h4 class="text-dark">
                  {% for d in sqlftr %} {{d.total_others}} {% endfor %}
                </h4>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="recon">
    <div class="row">
      <div class="col-md-12">
        <div class="card p-1 my-3" style="width: 100%; height: 400px">
          <div class="collapse" id="recon">
            <div class="bg-dark p-4">
              <nav class="navbar">
                <ul>
                  <li><a href="#" onclick="recon()">Export To PDF</a></li>
                  <li><a href="#">Export To JPG</a></li>
                </ul>
              </nav>
            </div>
          </div>
          <nav class="navbar navbar-light bg-transparent">
            <div class="container-fluid">
              <button
                class="navbar-toggler border-0"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#recon"
                aria-controls="recon"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
          </nav>
          <div class="table-responsive">
            <table
              class="table table-sm table-striped table-hover table-bordered"
              id="tableRecon"
            >
              <thead
                class="bg-dark text-light thead-sm"
                style="position: sticky; top: 0"
              >
                <tr>
                  <th>Incident Number</th>
                  <th>Coorporate Name</th>
                  <th>Resolve Time</th>
                  <th>Start Measurement</th>
                  <th>Priority</th>
                  <th>Region</th>
                  <th>Summary</th>
                  <th style="width: 20%">Resolution</th>
                  <th>OLA CES</th>
                  <th>OLA CEM</th>
                  <th>OLA NO</th>
                  <th style="width: 25%">Note</th>
                  <th>Aksi</th>
                </tr>
              </thead>
              <tbody>
                {% for d in sqlrecon %}
                <tr>
                  <td>{{d.Incident_Number}}</td>
                  <td>{{d.coorporate_name}}</td>
                  <td>{{d.RESOLVE_TIME_Jam}}</td>
                  <td>{{d.StartMeasurement}}</td>
                  <td>{{d.Priority}}</td>
                  <td>{{d.Region}}</td>
                  <td>{{d.Summary}}</td>
                  <td>{{d.Resolution}}</td>
                  {% if d.OLA_CCM_CHECK == 'Not Meet' %}
                  <td class="text-danger">{{d.OLA_CCM_CHECK}}</td>
                  {% else %}
                  <td class="text-dark">{{d.OLA_CCM_CHECK}}</td>
                  {% endif %} {% if d.OLA_CEM_TIME_CHECK == 'Not Meet' %}
                  <td class="text-danger">{{d.OLA_CEM_TIME_CHECK}}</td>
                  {% else %}
                  <td class="text-dark">{{d.OLA_CEM_TIME_CHECK}}</td>
                  {% endif %} {% if d.OLA_NETWORK_CHECK == 'Not Meet' %}
                  <td class="text-danger">{{d.OLA_NETWORK_CHECK}}</td>
                  {% else %}
                  <td class="text-dark">{{d.OLA_NETWORK_CHECK}}</td>
                  {% endif %}
                  <td>{{d.keterangan}}</td>
                  <td>
                    <a href="#" class="btn btn-warning"
                      ><i class="bi bi-pencil-square"></i
                    ></a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="ola">
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="card p-1 shadow">
          <div class="collapse" id="olaCem">
            <div class="bg-dark p-4">
              <nav class="navbar">
                <ul>
                  <li><a href="#" onclick="olaCem()">Export To PDF</a></li>
                  <li><a href="#">Export To JPG</a></li>
                </ul>
              </nav>
            </div>
          </div>
          <nav class="navbar navbar-light bg-transparent">
            <div class="container-fluid">
              <button
                class="navbar-toggler border-0"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#olaCem"
                aria-controls="olaCem"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
          </nav>
          <canvas id="myChart03" width="100%"></canvas>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card p-1 shadow">
          <div class="collapse" id="olaResp">
            <div class="bg-dark p-4">
              <nav class="navbar">
                <ul>
                  <li><a href="#" onclick="olaResp()">Export To PDF</a></li>
                  <li><a href="#">Export To JPG</a></li>
                </ul>
              </nav>
            </div>
          </div>
          <nav class="navbar navbar-light bg-transparent">
            <div class="container-fluid">
              <button
                class="navbar-toggler border-0"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#olaResp"
                aria-controls="olaResp"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
          </nav>
          <canvas id="myChart04" width="100%"></canvas>
        </div>
      </div>
    </div>
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="card p-1 shadow">
          <div class="collapse" id="olaNo">
            <div class="bg-dark p-4">
              <nav class="navbar">
                <ul>
                  <li><a href="#" onclick="olaNo()">Export To PDF</a></li>
                  <li><a href="#">Export To JPG</a></li>
                </ul>
              </nav>
            </div>
          </div>
          <nav class="navbar navbar-light bg-transparent">
            <div class="container-fluid">
              <button
                class="navbar-toggler border-0"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#olaNo"
                aria-controls="olaNo"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
          </nav>
          <canvas id="myChart05" width="100%"></canvas>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card p-1 shadow">
          <div class="collapse" id="olaCes">
            <div class="bg-dark p-4">
              <nav class="navbar">
                <ul>
                  <li><a href="#" onclick="olaCes()">Export To PDF</a></li>
                  <li><a href="#">Export To JPG</a></li>
                </ul>
              </nav>
            </div>
          </div>
          <nav class="navbar navbar-light bg-transparent">
            <div class="container-fluid">
              <button
                class="navbar-toggler border-0"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#olaCes"
                aria-controls="olaCes"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
          </nav>
          <canvas id="myChart06" width="100%"></canvas>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
  // Trend Ticket And SLA
  var ctx = document.getElementById("myChart01").getContext("2d");
  var myChart01 = new Chart(ctx, {
    data: {
      labels: [{% for d in sql  %}
      '{{d.bulan}}',
      {% endfor %}],
      datasets: [
        {
          type: "bar",
          label: "Within SLA",
          data: [{% for d in sql %}
          '{{d.total_within_sla}}',
          {% endfor %}],
          backgroundColor: "#8CFC4C",
          borderColor: "#8CFC4C",
          borderWidth: 1,

        },
        {
          type: "bar",
          label: "Out Of SLA",
          data: [{% for d in sql  %}
          '{{d.total_out_of_sla}}',
          {% endfor %}],
          backgroundColor: "#FE4E4E",
          borderColor: "#FE4E4E",
          borderWidth: 1,
        },
        {
          type: "line",
          label: "Trend Ticket",
          data: [{% for d in sql  %}
          '{{d.trend_ticket}}',
          {% endfor %}],
          backgroundColor: "#E1AE59",
          borderColor: "#E1AE59",
          borderWidth: 1,
        },

      ],
    },

    plugins: [ChartDataLabels],
    options: {
      plugins:{
        title: {
          display: true,
          text: "Trend Ticket And SLA",
        },
        datalabels: {
          color: '#00000',
          anchor: 'end',
          align: 'end'
        }

      },
      interaction: {
        intersect: false,
        mode: "index",
      },
      scales: {
        x: {
          title: {
            display: true,
            text: "Month",
          },
        },
        y: {
          title: {
            display: true,
            text: "Jumlah TIcket",
          },
          ticks: {
            stepSize: 50,
          },
          beginAtZero: true,
        },
      },
    }
  });

  // Trend Ticket And SLA Region
  var ctx = document.getElementById('myChart02').getContext('2d');
  var myChart02 = new Chart(ctx, {
      data: {
          labels: [{% for d in sqlr%}
          '{{d.Region}}',
          {% endfor %}],
          datasets: [{
                  type: 'bar',
                  label: 'Within SLA',
                  data: [{% for d in sqlr %}
                  '{{d.total_within_sla_region}}',
                  {% endfor %}],
                  backgroundColor: '#8CFC4C',
                  borderColor: '#8CFC4C',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Out Of SLA',
                  data: [{% for d in sqlr  %}
                  {{d.total_out_of_sla_region}},
                  {% endfor %}],
                  backgroundColor: '#FE4E4E',
                  borderColor: '#FE4E4E',
                  borderWidth: 1
              },
              {
                  type: 'line',
                  label: 'Trend Ticket',
                  data: [{% for d in sqlr %}
                  '{{d.trend_ticket_region}}',
                  {% endfor %}],
                  backgroundColor: '#E1AE59',
                  borderColor: '#E1AE59',
                  borderWidth: 1
              }
          ]
      },
      plugins: [ChartDataLabels],
      options: {
        plugins: {
              title: {
                  display: true,
                  text: 'Trend Ticket And SLA Region',
              },
              datalabels: {
                  color: '#00000',
                  anchor: 'end',
                  align: 'end'

              }

          },
          interaction: {
              intersect: false,
              mode: 'index',
          },
          scales: {
              x: {
                  title: {
                      display: true,
                      text: 'Region'
                  }
              },
              y: {
                  title: {
                      display: true,
                      text: 'Jumlah TIcket'
                  },
                  ticks: {
                      stepSize: 50
                  },
                  beginAtZero: true
              }
          },
      }

  });

  // WHY1
  var ctx = document.getElementById('chartWhy1').getContext('2d');
  var chartWhy1 = new Chart(ctx, {
      data: {
          labels: [''],
          datasets: [{
                  type: 'bar',
                  label: 'Data Service',
                  data: [{% for d in sqlwhy1  %}
                  {{d.data_service}},
                  {% endfor %}],
                  backgroundColor: '#FE4E4E',
                  borderColor: '#FE4E4E',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Signal',
                  data: [{% for d in sqlwhy1  %}
                  {{d.total_signal}},
                  {% endfor %}],
                  backgroundColor: '#FCAB49 ',
                  borderColor: '#FCAB49 ',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Voice Service',
                  data: [{% for d in sqlwhy1  %}
                  {{d.voice_service}},
                  {% endfor %}],
                  backgroundColor: '#FCF449',
                  borderColor: '#FCF449',
                  borderWidth: 1
              }
          ]
      },
      plugins: [ChartDataLabels],
      options: {
        indexAxis: 'y',
        elements: {
            bar: {
                borderWidth: 2,
            }
        },
        responsive: true,
        plugins: {
            legend: {
                position: 'bottom',
            },
              title: {
                display: true,
                text: 'WHY 1',
            },
            datalabels: {
                  color: '#00000',
                  anchor: 'end',
                  align: 'end'

              }
        }
      }

  });

  // WHY 2
  var ctx = document.getElementById('chartWhy2').getContext('2d');
  var chartWhy2 = new Chart(ctx, {
      data: {
          labels: [''],
          datasets: [{
                  type: 'bar',
                  label: 'Call BLocked',
                  data: [{% for d in sqlwhy2  %}
                  '{{d.call_blocked + d.val_call_blocked}}',
                  {% endfor %}],
                  backgroundColor: '#005278',
                  borderColor: '#005278',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Low Coverage / Signal not Strength',
                  data: [{% for d in sqlwhy2 %}
                  '{{d.low_coverage + d.val_low_coverage}}',
                  {% endfor %}],
                  backgroundColor: '#007842',
                  borderColor: '#007842',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'No Signal',
                  data: [{% for d in sqlwhy2 %}
                  '{{d.no_signal + d.val_no_signal}}',
                  {% endfor %}],
                  backgroundColor: '#782E00',
                  borderColor: '#782E00',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Slow Connection',
                  data: [{% for d in sqlwhy2 %}
                  '{{d.slow_connection + d.val_slow_connection}}',
                  {% endfor %}],
                  backgroundColor: '#787800',
                  borderColor: '#787800',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Unable To Connect',
                  data: [{% for d in sqlwhy2 %}
                  '{{d.unable_connect + d.val_unable_connect}}',
                  {% endfor %}],
                  backgroundColor: '#730078',
                  borderColor: '#730078',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Voice Quality',
                  data: [{% for d in sqlwhy2 %}
                  '{{d.val_voice_quality + d.voice_quality}}',
                  {% endfor %}],
                  backgroundColor: '#4967FC',
                  borderColor: '#4967FC',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Other',
                  data: [{% for d in sqlwhy2 %}
                  '{{d.other + d.val_other}}',
                  {% endfor %}],
                  backgroundColor: '#4967ae',
                  borderColor: '#4967ae',
                  borderWidth: 1
              },

          ]
      },
      plugins: [ChartDataLabels],
      options: {
          indexAxis: 'y',
          elements: {
              bar: {
                  borderWidth: 2,
              }
          },
          responsive: true,
          plugins: {
              legend: {
                  position: 'bottom',
              },
              title: {
                display: true,
                text: 'WHY 2',
              },
              datalabels: {
                  color: '#00000',
                  anchor: 'end',
                  align: 'end'

              }
          }
      }

  });

  // OLA CEM
  var ctx = document.getElementById('myChart03').getContext('2d');
  var myChart03 = new Chart(ctx, {
      data: {
          labels: [{% for d in sql  %}
          '{{d.bulan}}',
          {% endfor %}],
          datasets: [{
                  type: 'bar',
                  label: 'Meet',
                  data: [{% for d in sql %}
                  '{{d.ola_cem_meet}}',
                  {% endfor %}],
                  backgroundColor: '#8CFC4C',
                  borderColor: '#8CFC4C',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Not Meet',
                  data: [{% for d in sql %}
                  '{{d.ola_cem_notmeet}}',
                  {% endfor %}],
                  backgroundColor: '#FE4E4E',
                  borderColor: '#FE4E4E',
                  borderWidth: 1
              },
          ]
      },
      plugins: [ChartDataLabels],
      options: {
          plugins: {
              title: {
                  display: true,
                  text: 'OLA CEM',
              },
              datalabels: {
                  color: '#00000',
                  anchor: 'end',
                  align: 'end'

              }
          },
          interaction: {
              intersect: false,
              mode: 'index',
          },
          scales: {
              x: {
                  title: {
                      display: true,
                      text: 'Month'
                  }
              },
              y: {
                  title: {
                      display: true,
                      text: 'Jumlah TIcktet'
                  },
                  ticks: {
                      stepSize: 50
                  },
                  beginAtZero: true
              }
          },

      }

  });

  // OLA RESP
  var ctx = document.getElementById('myChart04').getContext('2d');
  var myChart04 = new Chart(ctx, {
      data: {
          labels: [{% for d in sql %}
          '{{d.bulan}}',
          {% endfor %}],
          datasets: [{
                  type: 'bar',
                  label: 'Meet',
                  data: [{% for d in sql %}
                  '{{d.ola_resp_meet}}',
                  {% endfor %}],
                  backgroundColor: '#8CFC4C',
                  borderColor: '#8CFC4C',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Not Meet',
                  data: [{% for d in sql %}
                  '{{d.ola_resp_notmeet}}',
                  {% endfor %}],
                  backgroundColor: '#FE4E4E',
                  borderColor: '#FE4E4E',
                  borderWidth: 1
              },
          ]
      },
      plugins: [ChartDataLabels],
      options: {
        plugins: {
              title: {
                  display: true,
                  text: 'OLA RESP',
              },
              datalabels: {
                  color: '#00000',
                  anchor: 'end',
                  align: 'end'

              }
          },
          interaction: {
              intersect: false,
              mode: 'index',
          },
          scales: {
              x: {
                  title: {
                      display: true,
                      text: 'Month'
                  }
              },
              y: {
                  title: {
                      display: true,
                      text: 'Jumlah TIcktet'
                  },
                  ticks: {
                      stepSize: 50
                  },
                  beginAtZero: true
              }
          },
      }

  });

  // OLA NO
  var ctx = document.getElementById('myChart05').getContext('2d');
  var myChart05 = new Chart(ctx, {
      data: {
          labels: [{% for d in sql %}
          '{{d.bulan}}',
          {% endfor %}],
          datasets: [{
                  type: 'bar',
                  label: 'Meet',
                  data: [{% for d in sql %}
                  '{{d.ola_no_meet}}',
                  {% endfor %}],
                  backgroundColor: '#8CFC4C',
                  borderColor: '#8CFC4C',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Not Meet',
                  data: [{% for d in sql %}
                  '{{d.ola_no_notmeet}}',
                  {% endfor %}],
                  backgroundColor: '#FE4E4E',
                  borderColor: '#FE4E4E',
                  borderWidth: 1
              },
          ]
      },
      plugins: [ChartDataLabels],
      options: {
          plugins: {
              title: {
                  display: true,
                  text: 'OLA NO',
              },
              datalabels: {
                  color: '#00000',
                  anchor: 'end',
                  align: 'end'

              }
          },
          interaction: {
              intersect: false,
              mode: 'index',
          },
          scales: {
              x: {
                  title: {
                      display: true,
                      text: 'Month'
                  }
              },
              y: {
                  title: {
                      display: true,
                      text: 'Jumlah TIcktet'
                  },
                  ticks: {
                      stepSize: 50
                  },
                  beginAtZero: true
              }
          },
      }

  });

  // OLA CES
  var ctx = document.getElementById('myChart06').getContext('2d');
  var myChart06 = new Chart(ctx, {
      data: {
          labels: [{% for d in sql %}
          '{{d.bulan}}',
          {% endfor %}],
          datasets: [{
                  type: 'bar',
                  label: 'Meet',
                  data: [{% for d in sql %}
                  '{{d.ola_ccm_meet}}',
                  {% endfor %}],
                  backgroundColor: '#8CFC4C',
                  borderColor: '#8CFC4C',
                  borderWidth: 1
              },
              {
                  type: 'bar',
                  label: 'Not Meet',
                  data: [{% for d in sql %}
                  '{{d.ola_ccm_notmeet}}',
                  {% endfor %}],
                  backgroundColor: '#FE4E4E',
                  borderColor: '#FE4E4E',
                  borderWidth: 1
              },
          ]
      },
      plugins: [ChartDataLabels],
      options: {
          plugins: {
              title: {
                  display: true,
                  text: 'OLA CES',
              },
               datalabels: {
                  color: '#00000',
                  anchor: 'end',
                  align: 'end'

              }
          },
          interaction: {
              intersect: false,
              mode: 'index',
          },
          scales: {
              x: {
                  title: {
                      display: true,
                      text: 'Month'
                  }
              },
              y: {
                  title: {
                      display: true,
                      text: 'Jumlah TIcktet'
                  },
                  ticks: {
                      stepSize: 50
                  },
                  beginAtZero: true
              }
          },
      }

  });
</script>
{% endblock content %}
